{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classes from './bestSellers.scss';\nimport axios from 'lib/axiosEnv';\nimport ImageProd from 'components/Shop/elements/imageProduct';\nlet _intervalIndex = 0;\nlet _boolDir = false;\n\nconst Seller = props => {\n  let {\n    0: count,\n    1: setCount\n  } = useState(_intervalIndex);\n  useEffect(() => {\n    if (props.playPause) {\n      let id = setInterval(() => {\n        if (!_boolDir) {\n          setCount(count += 1);\n          _intervalIndex = count;\n\n          if (count >= props.sellerCount - props.wrapCount) {\n            _boolDir = true;\n          }\n        } else {\n          setCount(count--);\n          _intervalIndex = count;\n\n          if (count <= 0) {\n            _boolDir = false;\n          }\n        }\n\n        props.refParent.current.style.transform = 'translateY(' + -(count * props.allow / props.wrapCount) + 'px)';\n      }, 3000);\n      return () => clearInterval(id);\n    }\n  }, [props.playPause]);\n\n  const _everySeller = props.products.map((item, index) => {\n    return __jsx(\"div\", {\n      className: classes['seller-item'],\n      key: index,\n      style: {\n        'height': props.heightRef + 'px'\n      }\n    }, __jsx(ImageProd, {\n      src: item.photo\n    }), __jsx(\"div\", {\n      className: classes['seller-item-info']\n    }, __jsx(\"a\", {\n      href: /product/ + item._id\n    }, item.name), item.sale ? __jsx(\"del\", null, item.price.toFixed(2), \" $\") : '', item.sale ? __jsx(\"span\", {\n      className: classes['seller-item-info-sale-price']\n    }, (item.price - Math.round(item.price * item.sale / 100)).toFixed(2), \" $\") : '', !item.sale ? __jsx(\"span\", {\n      className: classes['seller-item-info-sale-price']\n    }, item.price.toFixed(2), \" $\") : ''));\n  });\n\n  return _everySeller;\n};\n\nSeller.propTypes = {\n  products: PropTypes.array,\n  actIndex: PropTypes.number,\n  allow: PropTypes.number,\n  sellerCount: PropTypes.number,\n  wrapCount: PropTypes.number,\n  heightRef: PropTypes.number,\n  playPause: PropTypes.bool,\n  refParent: PropTypes.any\n};\n\nclass BestSellers extends React.Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"componentDidMount\", async () => {\n      //Get Best Sellers\n      const {\n        data\n      } = await axios.get('/api/products/getBestSellers', {\n        params: {\n          count: 5\n        }\n      });\n      if (data.error) console.error(data.error);else {\n        this.setState({\n          sellers: data.sellers\n        });\n      }\n\n      if (this.bestSellerRef.current) {\n        let _height = 0;\n        new Array(this.state.sellers.length).fill('').forEach((_, index) => {\n          if (index <= this.state.sellers.length - this.state.wrapCountSeller) {\n            _height += this.state.badgeHeight;\n          }\n        });\n        this.setState({\n          height: _height,\n          sellerLength: this.state.sellers.length\n        });\n      }\n    });\n\n    this.state = {\n      playClass: true,\n      activeIndex: 0,\n      height: 0,\n      sellerLength: 0,\n      badgeHeight: 111,\n      wrapCountSeller: 3,\n      sellers: []\n    };\n    this.bestSellerRef = React.createRef();\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: classes['best-sellers-wrapper']\n    }, __jsx(\"div\", {\n      className: classes['best-sellers-wrapper-head']\n    }, __jsx(\"h4\", null, \"BestSeller\"), __jsx(\"p\", null, __jsx(\"span\", {\n      className: `lnr-play-pause ${this.state.playClass ? 'paused' : ''}`,\n      onClick: () => this.setState({\n        playClass: !this.state.playClass,\n        direction: ''\n      })\n    }))), __jsx(\"div\", {\n      className: classes['best-sellers-wrapper-content'],\n      style: {\n        height: this.state.height + 'px'\n      }\n    }, __jsx(\"div\", {\n      ref: this.bestSellerRef,\n      className: classes['parent-scrolling']\n    }, this.state.height > 0 && __jsx(Seller, {\n      sellerCount: this.state.sellerLength,\n      wrapCount: this.state.wrapCountSeller,\n      products: this.state.sellers,\n      refParent: this.bestSellerRef,\n      actIndex: this.state.activeIndex,\n      direction: this.state.direction,\n      allow: this.state.height,\n      heightRef: this.state.badgeHeight,\n      playPause: this.state.playClass\n    }))));\n  }\n\n}\n\nexport default BestSellers;","map":{"version":3,"sources":["C:/Users/arthu/OneDrive/Desktop/Important/daser/next/OVENO/components/Home/BestSellers/bestSellers.jsx"],"names":["React","useState","useEffect","PropTypes","classes","axios","ImageProd","_intervalIndex","_boolDir","Seller","props","count","setCount","playPause","id","setInterval","sellerCount","wrapCount","refParent","current","style","transform","allow","clearInterval","_everySeller","products","map","item","index","heightRef","photo","_id","name","sale","price","toFixed","Math","round","propTypes","array","actIndex","number","bool","any","BestSellers","Component","constructor","data","get","params","error","console","setState","sellers","bestSellerRef","_height","Array","state","length","fill","forEach","_","wrapCountSeller","badgeHeight","height","sellerLength","playClass","activeIndex","createRef","render","direction"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,SAAP,MAAsB,uCAAtB;AAEA,IAAIC,cAAc,GAAG,CAArB;AACA,IAAIC,QAAQ,GAAG,KAAf;;AACA,MAAMC,MAAM,GAAIC,KAAD,IAAW;AACtB,MAAI;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBX,QAAQ,CAACM,cAAD,CAAhC;AACAL,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIQ,KAAK,CAACG,SAAV,EAAqB;AACjB,UAAIC,EAAE,GAAGC,WAAW,CAAC,MAAM;AACvB,YAAI,CAACP,QAAL,EAAe;AACXI,UAAAA,QAAQ,CAACD,KAAK,IAAI,CAAV,CAAR;AACAJ,UAAAA,cAAc,GAAGI,KAAjB;;AACA,cAAIA,KAAK,IAAID,KAAK,CAACM,WAAN,GAAoBN,KAAK,CAACO,SAAvC,EAAkD;AAC9CT,YAAAA,QAAQ,GAAG,IAAX;AACH;AACJ,SAND,MAMO;AACHI,UAAAA,QAAQ,CAACD,KAAK,EAAN,CAAR;AACAJ,UAAAA,cAAc,GAAGI,KAAjB;;AACA,cAAIA,KAAK,IAAI,CAAb,EAAgB;AACZH,YAAAA,QAAQ,GAAG,KAAX;AACH;AACJ;;AACDE,QAAAA,KAAK,CAACQ,SAAN,CAAgBC,OAAhB,CAAwBC,KAAxB,CAA8BC,SAA9B,GAA0C,gBAAgB,EAAEV,KAAK,GAAGD,KAAK,CAACY,KAAd,GAAsBZ,KAAK,CAACO,SAA9B,CAAhB,GAA2D,KAArG;AACH,OAfmB,EAejB,IAfiB,CAApB;AAgBA,aAAO,MAAMM,aAAa,CAACT,EAAD,CAA1B;AACH;AACJ,GApBQ,EAoBN,CAACJ,KAAK,CAACG,SAAP,CApBM,CAAT;;AAsBA,QAAMW,YAAY,GAAGd,KAAK,CAACe,QAAN,CAAeC,GAAf,CAAmB,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACrD,WACI;AAAK,MAAA,SAAS,EAAExB,OAAO,CAAC,aAAD,CAAvB;AAAwC,MAAA,GAAG,EAAEwB,KAA7C;AAAoD,MAAA,KAAK,EAAE;AAAE,kBAAUlB,KAAK,CAACmB,SAAN,GAAkB;AAA9B;AAA3D,OACI,MAAC,SAAD;AAAW,MAAA,GAAG,EAAEF,IAAI,CAACG;AAArB,MADJ,EAEI;AAAK,MAAA,SAAS,EAAE1B,OAAO,CAAC,kBAAD;AAAvB,OACI;AAAG,MAAA,IAAI,EAAE,YAAYuB,IAAI,CAACI;AAA1B,OAAgCJ,IAAI,CAACK,IAArC,CADJ,EAEKL,IAAI,CAACM,IAAL,GAAY,mBAAMN,IAAI,CAACO,KAAL,CAAWC,OAAX,CAAmB,CAAnB,CAAN,OAAZ,GAAmD,EAFxD,EAGKR,IAAI,CAACM,IAAL,GAAY;AACT,MAAA,SAAS,EAAE7B,OAAO,CAAC,6BAAD;AADT,OAC2C,CAACuB,IAAI,CAACO,KAAL,GAAcE,IAAI,CAACC,KAAL,CAAYV,IAAI,CAACO,KAAL,GAAaP,IAAI,CAACM,IAAnB,GAA2B,GAAtC,CAAf,EAA4DE,OAA5D,CAAoE,CAApE,CAD3C,OAAZ,GAC0I,EAJ/I,EAKK,CAACR,IAAI,CAACM,IAAN,GACG;AAAM,MAAA,SAAS,EAAE7B,OAAO,CAAC,6BAAD;AAAxB,OAA0DuB,IAAI,CAACO,KAAL,CAAWC,OAAX,CAAmB,CAAnB,CAA1D,OADH,GAC+F,EANpG,CAFJ,CADJ;AAaH,GAdoB,CAArB;;AAeA,SAAOX,YAAP;AACH,CAxCD;;AAyCAf,MAAM,CAAC6B,SAAP,GAAmB;AACfb,EAAAA,QAAQ,EAAEtB,SAAS,CAACoC,KADL;AAEfC,EAAAA,QAAQ,EAAErC,SAAS,CAACsC,MAFL;AAGfnB,EAAAA,KAAK,EAAEnB,SAAS,CAACsC,MAHF;AAIfzB,EAAAA,WAAW,EAAEb,SAAS,CAACsC,MAJR;AAKfxB,EAAAA,SAAS,EAAEd,SAAS,CAACsC,MALN;AAMfZ,EAAAA,SAAS,EAAE1B,SAAS,CAACsC,MANN;AAOf5B,EAAAA,SAAS,EAAEV,SAAS,CAACuC,IAPN;AAQfxB,EAAAA,SAAS,EAAEf,SAAS,CAACwC;AARN,CAAnB;;AAWA,MAAMC,WAAN,SAA0B5C,KAAK,CAAC6C,SAAhC,CAA0C;AACtCC,EAAAA,WAAW,GAAG;AACV;;AADU,+CAcM,YAAY;AAC5B;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAM1C,KAAK,CAAC2C,GAAN,CAAU,8BAAV,EAA0C;AAC7DC,QAAAA,MAAM,EAAE;AACJtC,UAAAA,KAAK,EAAE;AADH;AADqD,OAA1C,CAAvB;AAKA,UAAIoC,IAAI,CAACG,KAAT,EAAgBC,OAAO,CAACD,KAAR,CAAcH,IAAI,CAACG,KAAnB,EAAhB,KACK;AACD,aAAKE,QAAL,CAAc;AACVC,UAAAA,OAAO,EAAEN,IAAI,CAACM;AADJ,SAAd;AAGH;;AAED,UAAI,KAAKC,aAAL,CAAmBnC,OAAvB,EAAgC;AAC5B,YAAIoC,OAAO,GAAG,CAAd;AACA,YAAIC,KAAJ,CAAU,KAAKC,KAAL,CAAWJ,OAAX,CAAmBK,MAA7B,EAAqCC,IAArC,CAA0C,EAA1C,EAA8CC,OAA9C,CAAsD,CAACC,CAAD,EAAIjC,KAAJ,KAAc;AAChE,cAAIA,KAAK,IAAI,KAAK6B,KAAL,CAAWJ,OAAX,CAAmBK,MAAnB,GAA4B,KAAKD,KAAL,CAAWK,eAApD,EAAqE;AACjEP,YAAAA,OAAO,IAAI,KAAKE,KAAL,CAAWM,WAAtB;AACH;AACJ,SAJD;AAKA,aAAKX,QAAL,CAAc;AACVY,UAAAA,MAAM,EAAET,OADE;AAEVU,UAAAA,YAAY,EAAE,KAAKR,KAAL,CAAWJ,OAAX,CAAmBK;AAFvB,SAAd;AAIH;AACJ,KAxCa;;AAEV,SAAKD,KAAL,GAAa;AACTS,MAAAA,SAAS,EAAE,IADF;AAETC,MAAAA,WAAW,EAAE,CAFJ;AAGTH,MAAAA,MAAM,EAAE,CAHC;AAITC,MAAAA,YAAY,EAAE,CAJL;AAKTF,MAAAA,WAAW,EAAE,GALJ;AAMTD,MAAAA,eAAe,EAAE,CANR;AAOTT,MAAAA,OAAO,EAAE;AAPA,KAAb;AASA,SAAKC,aAAL,GAAqBtD,KAAK,CAACoE,SAAN,EAArB;AACH;;AA8BDC,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,SAAS,EAAEjE,OAAO,CAAC,sBAAD;AAAvB,OACI;AAAK,MAAA,SAAS,EAAEA,OAAO,CAAC,2BAAD;AAAvB,OACI,+BADJ,EAEI,iBACI;AAAM,MAAA,SAAS,EAAG,kBAAiB,KAAKqD,KAAL,CAAWS,SAAX,GAAuB,QAAvB,GAAkC,EAAG,EAAxE;AACM,MAAA,OAAO,EAAE,MAAM,KAAKd,QAAL,CAAc;AAAEc,QAAAA,SAAS,EAAE,CAAC,KAAKT,KAAL,CAAWS,SAAzB;AAAoCI,QAAAA,SAAS,EAAE;AAA/C,OAAd;AADrB,MADJ,CAFJ,CADJ,EAQI;AAAK,MAAA,SAAS,EAAElE,OAAO,CAAC,8BAAD,CAAvB;AAAyD,MAAA,KAAK,EAAE;AAAE4D,QAAAA,MAAM,EAAE,KAAKP,KAAL,CAAWO,MAAX,GAAoB;AAA9B;AAAhE,OACI;AAAK,MAAA,GAAG,EAAE,KAAKV,aAAf;AAA8B,MAAA,SAAS,EAAElD,OAAO,CAAC,kBAAD;AAAhD,OACK,KAAKqD,KAAL,CAAWO,MAAX,GAAoB,CAApB,IAAyB,MAAC,MAAD;AACtB,MAAA,WAAW,EAAE,KAAKP,KAAL,CAAWQ,YADF;AAEtB,MAAA,SAAS,EAAE,KAAKR,KAAL,CAAWK,eAFA;AAGtB,MAAA,QAAQ,EAAE,KAAKL,KAAL,CAAWJ,OAHC;AAItB,MAAA,SAAS,EAAE,KAAKC,aAJM;AAKtB,MAAA,QAAQ,EAAE,KAAKG,KAAL,CAAWU,WALC;AAMtB,MAAA,SAAS,EAAE,KAAKV,KAAL,CAAWa,SANA;AAOtB,MAAA,KAAK,EAAE,KAAKb,KAAL,CAAWO,MAPI;AAQtB,MAAA,SAAS,EAAE,KAAKP,KAAL,CAAWM,WARA;AAStB,MAAA,SAAS,EAAE,KAAKN,KAAL,CAAWS;AATA,MAD9B,CADJ,CARJ,CADJ;AAyBH;;AArEqC;;AAwE1C,eAAetB,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport classes from './bestSellers.scss';\r\nimport axios from 'lib/axiosEnv';\r\nimport ImageProd from 'components/Shop/elements/imageProduct';\r\n\r\nlet _intervalIndex = 0;\r\nlet _boolDir = false;\r\nconst Seller = (props) => {\r\n    let [count, setCount] = useState(_intervalIndex);\r\n    useEffect(() => {\r\n        if (props.playPause) {\r\n            let id = setInterval(() => {\r\n                if (!_boolDir) {\r\n                    setCount(count += 1);\r\n                    _intervalIndex = count;\r\n                    if (count >= props.sellerCount - props.wrapCount) {\r\n                        _boolDir = true\r\n                    }\r\n                } else {\r\n                    setCount(count--);\r\n                    _intervalIndex = count;\r\n                    if (count <= 0) {\r\n                        _boolDir = false\r\n                    }\r\n                }\r\n                props.refParent.current.style.transform = 'translateY(' + -(count * props.allow / props.wrapCount) + 'px)'\r\n            }, 3000);\r\n            return () => clearInterval(id);\r\n        }\r\n    }, [props.playPause]);\r\n\r\n    const _everySeller = props.products.map((item, index) => {\r\n        return (\r\n            <div className={classes['seller-item']} key={index} style={{ 'height': props.heightRef + 'px' }}>\r\n                <ImageProd src={item.photo}/>\r\n                <div className={classes['seller-item-info']}>\r\n                    <a href={/product/ + item._id}>{item.name}</a>\r\n                    {item.sale ? <del>{item.price.toFixed(2)} $</del> : ''}\r\n                    {item.sale ? <span\r\n                        className={classes['seller-item-info-sale-price']}>{(item.price - (Math.round((item.price * item.sale) / 100))).toFixed(2)} $</span> : ''}\r\n                    {!item.sale ?\r\n                        <span className={classes['seller-item-info-sale-price']}>{item.price.toFixed(2)} $</span> : ''}\r\n                </div>\r\n            </div>\r\n        )\r\n    });\r\n    return _everySeller\r\n};\r\nSeller.propTypes = {\r\n    products: PropTypes.array,\r\n    actIndex: PropTypes.number,\r\n    allow: PropTypes.number,\r\n    sellerCount: PropTypes.number,\r\n    wrapCount: PropTypes.number,\r\n    heightRef: PropTypes.number,\r\n    playPause: PropTypes.bool,\r\n    refParent: PropTypes.any,\r\n};\r\n\r\nclass BestSellers extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            playClass: true,\r\n            activeIndex: 0,\r\n            height: 0,\r\n            sellerLength: 0,\r\n            badgeHeight: 111,\r\n            wrapCountSeller: 3,\r\n            sellers: [],\r\n        };\r\n        this.bestSellerRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        //Get Best Sellers\r\n        const { data } = await axios.get('/api/products/getBestSellers', {\r\n            params: {\r\n                count: 5\r\n            }\r\n        });\r\n        if (data.error) console.error(data.error);\r\n        else {\r\n            this.setState({\r\n                sellers: data.sellers\r\n            })\r\n        }\r\n\r\n        if (this.bestSellerRef.current) {\r\n            let _height = 0;\r\n            new Array(this.state.sellers.length).fill('').forEach((_, index) => {\r\n                if (index <= this.state.sellers.length - this.state.wrapCountSeller) {\r\n                    _height += this.state.badgeHeight\r\n                }\r\n            });\r\n            this.setState({\r\n                height: _height,\r\n                sellerLength: this.state.sellers.length\r\n            })\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className={classes['best-sellers-wrapper']}>\r\n                <div className={classes['best-sellers-wrapper-head']}>\r\n                    <h4>BestSeller</h4>\r\n                    <p>\r\n                        <span className={`lnr-play-pause ${this.state.playClass ? 'paused' : ''}`}\r\n                              onClick={() => this.setState({ playClass: !this.state.playClass, direction: '' })}></span>\r\n                    </p>\r\n                </div>\r\n                <div className={classes['best-sellers-wrapper-content']} style={{ height: this.state.height + 'px' }}>\r\n                    <div ref={this.bestSellerRef} className={classes['parent-scrolling']}>\r\n                        {this.state.height > 0 && <Seller\r\n                            sellerCount={this.state.sellerLength}\r\n                            wrapCount={this.state.wrapCountSeller}\r\n                            products={this.state.sellers}\r\n                            refParent={this.bestSellerRef}\r\n                            actIndex={this.state.activeIndex}\r\n                            direction={this.state.direction}\r\n                            allow={this.state.height}\r\n                            heightRef={this.state.badgeHeight}\r\n                            playPause={this.state.playClass}/>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BestSellers;\r\n"]},"metadata":{},"sourceType":"module"}