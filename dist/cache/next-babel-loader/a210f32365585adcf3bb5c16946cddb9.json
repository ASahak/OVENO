{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Container, Row, Col } from 'reactstrap';\nimport classesMiddleWrap from './middleWrap.scss';\nimport Router from 'next/router';\nimport { ModalToggle } from \"utils/common\";\nimport { connect } from \"react-redux\";\nimport axios from \"lib/axiosEnv\";\nimport { Bus } from \"lib/EventEmitter\";\n\nconst {\n  getToken\n} = require('utils/auth');\n\nclass MiddleWrap extends React.Component {\n  constructor(props) {\n    super(props);\n    this.cartRef = React.createRef();\n    this._modal = new ModalToggle();\n    this.state = {\n      dataCart: []\n    };\n    this.searchRef = React.createRef();\n    Bus.subscribe('filterByCategory', reset => {\n      if (reset && reset.searchReset && this.searchRef.current) {\n        this.searchRef.current.value = '';\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    Bus.unsubscribe('filterByCategory');\n  }\n\n  componentDidMount() {\n    if (Router.router.components.hasOwnProperty('/shop')) {\n      setTimeout(() => {\n        const query = _objectSpread({}, Router.query);\n\n        this.searchRef.current.value = query.name || '';\n      }, 0);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevProps.isUser !== this.props.isUser) {\n      (async () => {\n        const {\n          data\n        } = await axios.get('/api/cart/getCart', {\n          headers: {\n            Authorization: getToken('token')\n          },\n          params: {\n            ids: [...this.props.isUser.cart.map(id => id._id)]\n          }\n        });\n\n        if (data.error) {\n          console.error(data.error);\n          return;\n        }\n\n        this.setState({\n          dataCart: (() => {\n            const cart = [];\n            this.props.isUser.cart.forEach(item => {\n              const findMatched = data.products.find(el => el._id === item._id);\n\n              if (findMatched) {\n                cart.push({\n                  id: item._id,\n                  name: findMatched.name,\n                  count: item.count,\n                  imgPath: findMatched.photo\n                });\n              } else {\n                // Detect Already Removed Products\n                cart.push({\n                  removed: true\n                });\n              }\n            });\n            return cart.slice(0, 2);\n          })()\n        });\n      })();\n    }\n  }\n\n  __showLangModal(ref, hint) {\n    return ref.current && this._modal.showModal(ref.current, false, hint);\n  }\n\n  __hideModal() {\n    this._modal.customHideModal();\n  }\n\n  searchByName() {\n    if (this.searchRef.current) {\n      const query = _objectSpread({}, Router.query);\n\n      Router.push({\n        pathname: '/shop',\n        query: _objectSpread({}, query, {\n          name: this.searchRef.current.value\n        })\n      }).then(() => Bus.dispatch('filterByCategory'));\n    }\n  }\n\n  triggerSearchName(evt) {\n    if (evt.key === 'Enter') {\n      this.searchByName();\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: classesMiddleWrap.middle_content_header\n    }, __jsx(Container, null, __jsx(Row, {\n      className: \"align-items-center\"\n    }, __jsx(Col, {\n      xs: \"7\",\n      sm: \"7\",\n      md: \"4\",\n      className: classesMiddleWrap.logo_content\n    }, __jsx(\"a\", {\n      href: \"/\",\n      className: \"d-inline-flex align-items-center justify-content-md-start justify-content-center\"\n    }, __jsx(\"img\", {\n      className: \"mr-2\",\n      src: require('../../../../assets/images/logo.png'),\n      alt: \"\"\n    }), \"VENO\")), __jsx(Col, {\n      xs: \"12\",\n      sm: \"12\",\n      md: \"5\",\n      className: classesMiddleWrap.search_block\n    }, __jsx(\"div\", {\n      id: classesMiddleWrap.main_search\n    }, __jsx(\"div\", {\n      className: classesMiddleWrap.search_wrap\n    }, __jsx(\"input\", {\n      type: \"text\",\n      ref: this.searchRef,\n      onKeyPress: e => this.triggerSearchName(e),\n      placeholder: \"Search entire store here...\"\n    }), __jsx(\"button\", {\n      type: \"button\",\n      onClick: () => this.searchByName()\n    }, __jsx(\"span\", {\n      className: \"lnr lnr-magnifier\"\n    }))))), this.props.isUser ? __jsx(Col, {\n      xs: \"5\",\n      sm: \"5\",\n      md: \"3\",\n      className: classesMiddleWrap.cart_item_parent\n    }, __jsx(\"a\", {\n      className: classesMiddleWrap.cart_wrap,\n      onClick: this.__showLangModal.bind(this, this.cartRef, 'noClose')\n    }, __jsx(\"span\", {\n      className: `${classesMiddleWrap.lnr} lnr lnr-cart`\n    }), \"My cart: \", this.props.isUser.cart.length, \" item\", __jsx(\"i\", {\n      className: `${classesMiddleWrap.fas} fas fa-angle-down`\n    })), __jsx(ShopCart, {\n      hideModal: this.__hideModal.bind(this),\n      ref: this.cartRef,\n      data: this.state.dataCart\n    })) : '')));\n  }\n\n}\n\nconst ShopCart = React.forwardRef(({\n  data,\n  noHide,\n  hideModal\n}, ref) => {\n  let _cart = data.map((item, index) => __jsx(\"li\", {\n    key: item.removed ? index : item.id,\n    className: classesMiddleWrap['main-cart-modal-item']\n  }, item.removed ? __jsx(\"span\", null, \"This Item removed\") : __jsx(React.Fragment, null, __jsx(\"span\", null, __jsx(\"img\", {\n    src: item.imgPath,\n    alt: \"no image\"\n  }), __jsx(\"b\", null, item.name)), __jsx(\"div\", null, __jsx(\"span\", null, \"x \", __jsx(\"br\", null), item.count)))));\n\n  return __jsx(\"div\", {\n    className: classesMiddleWrap['main-cart-modal'],\n    ref: ref\n  }, data.length ? __jsx(React.Fragment, null, __jsx(\"ul\", null, _cart), __jsx(\"a\", {\n    href: \"/cart\",\n    className: classesMiddleWrap['view-all-cart-btn'],\n    onClick: hideModal\n  }, \"View All\")) : 'You dont have any added product in your cart yet');\n});\n\nconst mapStateToProps = state => ({\n  isUser: state.auth.user\n});\n\nconst mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(MiddleWrap);","map":{"version":3,"sources":["C:/Users/arthu/OneDrive/Desktop/Important/daser/next/OVENO/components/shared/header/elements/middleWrap.jsx"],"names":["React","Container","Row","Col","classesMiddleWrap","Router","ModalToggle","connect","axios","Bus","getToken","require","MiddleWrap","Component","constructor","props","cartRef","createRef","_modal","state","dataCart","searchRef","subscribe","reset","searchReset","current","value","componentWillUnmount","unsubscribe","componentDidMount","router","components","hasOwnProperty","setTimeout","query","name","componentDidUpdate","prevProps","prevState","snapshot","isUser","data","get","headers","Authorization","params","ids","cart","map","id","_id","error","console","setState","forEach","item","findMatched","products","find","el","push","count","imgPath","photo","removed","slice","__showLangModal","ref","hint","showModal","__hideModal","customHideModal","searchByName","pathname","then","dispatch","triggerSearchName","evt","key","render","middle_content_header","logo_content","search_block","main_search","search_wrap","e","cart_item_parent","cart_wrap","bind","lnr","length","fas","ShopCart","forwardRef","noHide","hideModal","_cart","index","mapStateToProps","auth","user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Container, Row, Col} from 'reactstrap'\r\nimport classesMiddleWrap from './middleWrap.scss';\r\nimport Router from 'next/router';\r\nimport {ModalToggle} from \"utils/common\";\r\nimport {connect} from \"react-redux\";\r\nimport axios from \"lib/axiosEnv\";\r\nimport {Bus} from \"lib/EventEmitter\";\r\nconst {\r\n    getToken\r\n} = require('utils/auth');\r\n\r\nclass MiddleWrap extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.cartRef = React.createRef();\r\n        this._modal = new ModalToggle();\r\n        this.state = {\r\n            dataCart: []\r\n        };\r\n        this.searchRef = React.createRef();\r\n        Bus.subscribe('filterByCategory', (reset) => {\r\n            if (reset && reset.searchReset && this.searchRef.current) {\r\n                this.searchRef.current.value = ''\r\n            }\r\n        })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Bus.unsubscribe('filterByCategory');\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (Router.router.components.hasOwnProperty('/shop')) {\r\n            setTimeout(() => {\r\n                const query = {...Router.query};\r\n                this.searchRef.current.value = query.name || ''\r\n            }, 0)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (prevProps.isUser !== this.props.isUser) {\r\n            (async () => {\r\n                const {data} = await axios.get('/api/cart/getCart', {\r\n                    headers: { Authorization: getToken('token')},\r\n                    params: {\r\n                        ids: [...this.props.isUser.cart.map(id => id._id)],\r\n                    }\r\n                });\r\n                if (data.error) {\r\n                    console.error(data.error);\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    dataCart: (() => {\r\n                        const cart = [];\r\n                        this.props.isUser.cart.forEach(item => {\r\n                            const findMatched = data.products.find(el => el._id === item._id);\r\n                            if (findMatched) {\r\n                                cart.push({\r\n                                    id: item._id,\r\n                                    name: findMatched.name,\r\n                                    count: item.count,\r\n                                    imgPath: findMatched.photo,\r\n                                })\r\n                            } else { // Detect Already Removed Products\r\n                                cart.push({\r\n                                    removed: true,\r\n                                })\r\n                            }\r\n                        });\r\n                        return cart.slice(0, 2);\r\n                    })()\r\n                });\r\n            })();\r\n        }\r\n    }\r\n\r\n    __showLangModal (ref, hint) {\r\n        return ref.current && this._modal.showModal(ref.current, false, hint)\r\n    }\r\n    __hideModal () {\r\n        this._modal.customHideModal()\r\n    }\r\n\r\n    searchByName () {\r\n        if (this.searchRef.current) {\r\n            const query = {...Router.query};\r\n            Router.push({\r\n                pathname: '/shop',\r\n                query: { ...query, name: this.searchRef.current.value}\r\n            }).then(() => Bus.dispatch('filterByCategory'))\r\n        }\r\n    }\r\n    triggerSearchName (evt) {\r\n        if (evt.key === 'Enter') {\r\n            this.searchByName();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={classesMiddleWrap.middle_content_header}>\r\n                <Container>\r\n                    <Row className=\"align-items-center\">\r\n                        <Col xs=\"7\" sm=\"7\" md=\"4\" className={classesMiddleWrap.logo_content}>\r\n                            <a href=\"/\" className=\"d-inline-flex align-items-center justify-content-md-start justify-content-center\">\r\n                                <img className=\"mr-2\" src={require('../../../../assets/images/logo.png')} alt=\"\" />\r\n                                VENO\r\n                            </a>\r\n                        </Col>\r\n                        <Col xs=\"12\" sm=\"12\" md=\"5\" className={classesMiddleWrap.search_block}>\r\n                            <div id={classesMiddleWrap.main_search}>\r\n                                <div className={classesMiddleWrap.search_wrap}>\r\n                                    <input type=\"text\" ref={this.searchRef} onKeyPress={(e) => this.triggerSearchName(e)} placeholder=\"Search entire store here...\" />\r\n                                    <button type=\"button\" onClick={() => this.searchByName()}>\r\n                                        <span className=\"lnr lnr-magnifier\"></span>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </Col>\r\n                        {this.props.isUser ? <Col xs=\"5\" sm=\"5\" md=\"3\" className={classesMiddleWrap.cart_item_parent}>\r\n                            <a className={classesMiddleWrap.cart_wrap} onClick={this.__showLangModal.bind(this, this.cartRef, 'noClose')}>\r\n                                <span className={`${classesMiddleWrap.lnr} lnr lnr-cart`}></span>\r\n                                My cart: {this.props.isUser.cart.length} item\r\n                                <i className={`${classesMiddleWrap.fas} fas fa-angle-down`}></i>\r\n                            </a>\r\n                            <ShopCart hideModal={this.__hideModal.bind(this)} ref={this.cartRef} data={this.state.dataCart} />\r\n                        </Col> : ''}\r\n                    </Row>\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst ShopCart = React.forwardRef(({data, noHide, hideModal}, ref) => {\r\n    let _cart = data.map((item, index) => <li key={item.removed ? index : item.id} className={classesMiddleWrap['main-cart-modal-item']}>\r\n        {item.removed ? <span>This Item removed</span> :\r\n            <>\r\n                <span>\r\n                    <img src={item.imgPath} alt=\"no image\"/>\r\n                    <b>{item.name}</b>\r\n                </span>\r\n                <div>\r\n                    <span>\r\n                        x <br />\r\n                        {item.count}\r\n                    </span>\r\n                </div>\r\n            </>\r\n        }\r\n    </li>);\r\n    return <div className={classesMiddleWrap['main-cart-modal']} ref={ref}>\r\n        {data.length ?\r\n            <>\r\n                <ul>\r\n                    {_cart}\r\n                </ul>\r\n                <a href=\"/cart\" className={classesMiddleWrap['view-all-cart-btn']} onClick={hideModal}>View All</a>\r\n            </>\r\n            : 'You dont have any added product in your cart yet'}\r\n    </div>\r\n});\r\n\r\nconst mapStateToProps = state => ({\r\n    isUser: state.auth.user\r\n});\r\nconst mapDispatchToProps = {\r\n};\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MiddleWrap);\r\n"]},"metadata":{},"sourceType":"module"}