{"ast":null,"code":"var _Date$now = require(\"@babel/runtime-corejs2/core-js/date/now\");\n\nconst axios = require('axios');\n\nconst {\n  getToken,\n  removeCookieByKey\n} = require('../utils/auth');\n\nconst jwtDecode = require('jwt-decode');\n\nconst axiosInstance = axios.create({\n  baseURL: process.env.NODE_ENV !== 'production' ? process.env.CLIENT_URL : process.env.PROD_URL\n});\naxiosInstance.interceptors.request.use(req => {\n  const token = getToken();\n\n  if (token && jwtDecode(token).exp < _Date$now() / 1000) {\n    removeCookieByKey('token');\n    location.href = '/';\n  }\n\n  return req;\n});\nmodule.exports = axiosInstance;","map":{"version":3,"sources":["C:/Users/arthu/OneDrive/Desktop/Important/daser/next/OVENO/lib/axiosEnv.js"],"names":["axios","require","getToken","removeCookieByKey","jwtDecode","axiosInstance","create","baseURL","process","env","NODE_ENV","CLIENT_URL","PROD_URL","interceptors","request","use","req","token","exp","location","href","module","exports"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAM;AACFC,EAAAA,QADE;AAEFC,EAAAA;AAFE,IAGFF,OAAO,CAAC,eAAD,CAHX;;AAIA,MAAMG,SAAS,GAAGH,OAAO,CAAC,YAAD,CAAzB;;AACA,MAAMI,aAAa,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC/BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCF,OAAO,CAACC,GAAR,CAAYE,UAApD,GAAiEH,OAAO,CAACC,GAAR,CAAYG;AADvD,CAAb,CAAtB;AAIAP,aAAa,CAACQ,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAuCC,GAAG,IAAI;AAC1C,QAAMC,KAAK,GAAGf,QAAQ,EAAtB;;AACA,MAAIe,KAAK,IAAIb,SAAS,CAACa,KAAD,CAAT,CAAiBC,GAAjB,GAAuB,cAAa,IAAjD,EAAuD;AACnDf,IAAAA,iBAAiB,CAAC,OAAD,CAAjB;AACAgB,IAAAA,QAAQ,CAACC,IAAT,GAAgB,GAAhB;AACH;;AACD,SAAOJ,GAAP;AACH,CAPD;AAQAK,MAAM,CAACC,OAAP,GAAiBjB,aAAjB","sourcesContent":["const axios = require('axios');\r\nconst {\r\n    getToken,\r\n    removeCookieByKey\r\n} = require('../utils/auth');\r\nconst jwtDecode = require('jwt-decode');\r\nconst axiosInstance = axios.create({\r\n    baseURL: process.env.NODE_ENV !== 'production' ? process.env.CLIENT_URL : process.env.PROD_URL\r\n});\r\n\r\naxiosInstance.interceptors.request.use(req => {\r\n    const token = getToken();\r\n    if (token && jwtDecode(token).exp < Date.now() / 1000) {\r\n        removeCookieByKey('token');\r\n        location.href = '/';\r\n    }\r\n    return req;\r\n});\r\nmodule.exports = axiosInstance;\r\n"]},"metadata":{},"sourceType":"script"}