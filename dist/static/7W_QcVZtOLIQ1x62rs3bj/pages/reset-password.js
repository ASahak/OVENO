(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{GfUn:function(e,r,t){"use strict";t.r(r);var a=t("ln6h"),s=t.n(a),n=t("O40h"),o=t("q1tI"),i=t.n(o),u=t("nOHt"),p=t("MX+e"),c=t.n(p),d=t("/MKj"),l=t("1Yj4"),w=t("ok1R"),f=t("rhny"),m=t("FGyW"),h=t("RdWu"),b=t("Qi1R"),k=t("8Kt/"),g=t.n(k),v=t("MHX4"),y=i.a.createElement,O=function(e){var r=Object(u.useRouter)(),t=Object(o.useState)(!1),a=t[0],p=t[1],d=Object(v.a)({mode:"onBlur"}),k=d.register,O=d.handleSubmit,_=d.watch,j=d.errors,x=d.reset,R=function(){var e=Object(n.a)(s.a.mark(function e(t){var a,n,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!0),e.prev=1,!r.query.token){e.next=13;break}return e.next=5,c.a.put("/api/reset-password",{resetLink:r.query.token,newPassword:t.password});case 5:if(a=e.sent,!(n=a.data).error){e.next=9;break}throw Error(n.error);case 9:m.b.dark(n.message,{position:"top-right",autoClose:3e3,pauseOnHover:!1}),setTimeout(function(){location.href="/login"},3e3),e.next=20;break;case 13:return e.next=15,c.a.put("/api/forget-password",t);case 15:if(o=e.sent,!(i=o.data).error){e.next=19;break}throw Error(i.error);case 19:m.b.dark(i.message,{position:"top-right",autoClose:3e3,pauseOnHover:!1});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(1),m.b.error(e.t0.message,{position:"top-right",autoClose:3e3,pauseOnHover:!1});case 25:return e.prev=25,p(!1),e.finish(25);case 28:x();case 29:case"end":return e.stop()}},e,null,[[1,22,25,28]])}));return function(r){return e.apply(this,arguments)}}(),I=Object(o.useRef)({});I.current=_("password","");var P=Object(o.useCallback)(function(){return r.query.token?"Reset Password":"Forget Password"},[r.query.token]);return y(l.a,null,y(g.a,null,y("title",null,P())),y(w.a,null,y(f.a,{sm:{size:12},md:{size:10,offset:1},lg:{size:8,offset:2}},y("div",{className:"contact-main-wrap"},y("form",{onSubmit:O(R)},y("h3",null,P()),r.query.token?y(i.a.Fragment,null,y(h.a.Input,{refBind:k(b.PASSWORD_VALIDATOR),errors:j.password&&j.password.message||j.password&&"containsDigit"===j.password.type&&"Use 1 ore more numbers"||j.password&&"containsUppercase"===j.password.type&&"Use upper and lower case characters",name:"password",type:"password",fullWidth:!0,placeholder:"New Password",size:"md"}),y(h.a.Input,{refBind:k({validate:function(e){return e===I.current||"The passwords do not match"}}),errors:j.password_repeat&&j.password_repeat.message,name:"password_repeat",type:"password",fullWidth:!0,placeholder:"Confirm Password",size:"md"})):y(h.a.Input,{type:"email",name:"email",refBind:k(b.EMAIL_VALIDATOR),errors:j.email&&j.email.message,fullWidth:!0,placeholder:"Email ID",size:"md"}),y(h.a.Button,{icon:a?{dir:"right",element:"loading"}:{},type:"submit",text:r.query.token?"Reset":"Send",width:100}))))))};O.getInitialProps=function(){var e=Object(n.a)(s.a.mark(function e(r){var t,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.req,a=r.res,t&&t.headers.cookie&&a.redirect("/"),e.abrupt("return",{status:!0});case 4:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}();r.default=Object(d.b)(function(e){return{isUser:e.auth.user}},{})(O)},X9eL:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return t("GfUn")}])}},[["X9eL",0,1]]]);